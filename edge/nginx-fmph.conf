worker_processes auto;
events { worker_connections 1024; }

http {
  proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=EDGE:10m max_size=100m inactive=10m use_temp_path=off;

  upstream origin {
    server 10.0.0.3:80;
  }

  server {
    listen 80;
    location / {
      proxy_cache EDGE;
      proxy_cache_valid 200 10m;
      proxy_pass http://origin;
      add_header X-Edge "fmph" always;
      add_header X-Cache $upstream_cache_status always;
      # For edge decompression test: Uncomment to fetch uncompressed from origin
      # proxy_set_header Accept-Encoding "";
      # gzip on;  # Re-compress if desired
    }
  }
}