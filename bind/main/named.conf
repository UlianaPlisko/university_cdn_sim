options {
    directory "/var/lib/bind";
    listen-on { any; };
    allow-query { any; };
    recursion yes;        # must allow recursion for forwarding
    querylog yes;
    dnssec-validation no;  # Add this to disable DNSSEC checks
};

# FIIT students
view "fiit" {
    match-clients { 10.0.1.0/28; };
    zone "cdn.univ.test" IN {
        type forward;
        forward only;       # Add this: strict forwarding, no recursion fallback
        forwarders { 10.0.1.5; };   # secondary-dns FIIT IP
    };
};

# FMPH students
view "fmph" {
    match-clients { 10.0.2.0/28; };
    zone "cdn.univ.test" IN {
        type forward;
        forward only;       # Add this
        forwarders { 10.0.2.5; };   # secondary-dns FMPH IP
    };
};

# FCHPT students
view "fchpt" {
    match-clients { 10.0.3.0/28; };
    zone "cdn.univ.test" IN {
        type forward;
        forward only;       # Add this
        forwarders { 10.0.3.5; };   # secondary-dns FCHPT IP
    };
};

# Default for anyone else: forward to secondary-dns (or origin if needed)
view "default" {
    match-clients { any; };
    zone "cdn.univ.test" IN {
        type forward;
        forward only;       # Add this
        forwarders { 10.0.0.3; };   # secondary-dns core_net IP
    };
};